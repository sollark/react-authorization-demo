import{aC as l,j as s,aD as i,n as S,b as w,B as b}from"./index-4c6a8037.js";import{z as o,S as y,I as c,C as v}from"./CustomLink-bfb371bd.js";import{S as m}from"./SecondaryButton-7a73babb.js";import{a as g}from"./account.service-3d6f29fa.js";import{F as f,E as I}from"./Form-fd11b527.js";import"./TextField-a99ce118.js";const C=()=>{const e=l(),a=async n=>{switch(n){case"employee":await i.signIn("employee@test.com","employee@");break;case"manager":await i.signIn("manager@test.com","manager@");break;case"supervisor":await i.signIn("supervisor@test.com","supervisor@");break}const t=await g.getAccount();t!=null&&t.isComplete?e({to:"/"}):e({to:"/account/edit"})};return s.jsxs("div",{style:{display:"flex"},children:[s.jsx(m,{onClick:()=>a("employee"),children:"Sign in as Employee"}),s.jsx(m,{onClick:()=>a("manager"),children:"Sign in as Manager"}),s.jsx(m,{onClick:()=>a("supervisor"),children:"Sign in as Supervisor"})]})},k={email:"",password:""},E=o.object({email:o.string().trim().min(1,{message:"Field can not be empty"}).email({message:"Invalid email address"}),password:o.string().trim().min(1,{message:"Field can not be empty"}).min(6,{message:"Password must be at least 6 characters"}).max(20,{message:"Password must be less than 20 characters"})}),F=()=>{const[e,a]=S.useState(""),n=l();async function t(p){const{email:u,password:d}=p;a("");const x=await i.signIn(u,d),{success:h,message:j}=x;if(!h){a(j);return}const r=await g.getAccount();r!=null&&r.isComplete?n({to:"/"}):n({to:"/account/edit"})}return s.jsx(s.Fragment,{children:s.jsxs(f,{schema:E,defaultValues:k,submit:t,submitButton:s.jsx(y,{}),children:[s.jsx(c,{name:"email",label:"Email",type:"email"}),s.jsx(c,{name:"password",label:"Password",type:"password"}),s.jsx(I,{message:e})]})})},z=()=>{const{t:e}=w();return s.jsxs(b,{component:"article",sx:{maxWidth:"25rem",mx:"auto",p:"1rem"},children:[s.jsx("h1",{children:e("pages.sign_in")}),s.jsx(F,{}),s.jsxs("p",{children:[e("sign_in_page.Don't have an account?")," ",s.jsx(v,{to:"/registration",children:e("auth.registration")})]}),s.jsx(C,{})]})};export{z as default};
