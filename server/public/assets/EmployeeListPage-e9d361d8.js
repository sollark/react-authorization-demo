import{b as y,j as a,c as j,d as D,B as C}from"./index-cef6223c.js";import{e as d,T as u,a as x}from"./Table-a9260344.js";import{u as f}from"./useQuery-49761d12.js";import"./SecondaryButton-34ac6c7b.js";import"./TextField-e1f98dd0.js";const w=()=>{const{t:e}=y(),t=[{field:"firstName",headerName:e("employees_page.employee_table_labels.first_name"),flex:1},{field:"lastName",headerName:e("employees_page.employee_table_labels.last_name"),flex:1},{field:"ID",headerName:e("employees_page.employee_table_labels.id"),flex:1},{field:"departmentName",headerName:e("employees_page.employee_table_labels.department"),flex:1},{field:"employeeNumber",headerName:e("employees_page.employee_table_labels.employee_number"),flex:1},{field:"position",headerName:e("employees_page.employee_table_labels.position"),flex:1}],{isPending:l,isError:m,data:n,error:p}=f({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(l)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",p.message]});if(!n)return a.jsx("span",{children:"Empty data"});const o=n,i=o==null?void 0:o.map(s=>({firstName:s.profile.firstName,lastName:s.profile.lastName,ID:s.profile.ID,departmentName:s.department.departmentName,employeeNumber:s.employeeNumber,position:s.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:i,tableColumns:t}})]})},b=()=>{const{t:e}=y(),t=[{field:"firstName",headerName:e("employees_page.employee_table_labels.first_name"),flex:1},{field:"lastName",headerName:e("employees_page.employee_table_labels.last_name"),flex:1},{field:"departmentName",headerName:e("employees_page.employee_table_labels.department"),flex:1},{field:"position",headerName:e("employees_page.employee_table_labels.position"),flex:1}],{isPending:l,isError:m,data:n,error:p}=f({queryKey:["employees"],queryFn:d.getCompanyEmployeeBasicData});if(l)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",p.message]});if(!n)return a.jsx("span",{children:"Empty data"});const o=n,i=o==null?void 0:o.map(s=>({firstName:s.profile.firstName,lastName:s.profile.lastName,departmentName:s.department.departmentName,position:s.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:i,tableColumns:t}})]})};let _;function T(){return async e=>{const t=x(e),{firstName:l,lastName:m,ID:n,departmentName:p,employeeNumber:o,position:i}=t;return await d.updateCompanyEmployee(l,m,n,p,o,i),!0}}function v(){return async e=>{const t=x(e),{employeeNumber:l}=t;return await d.deleteCompanyEmployee(l),!0}}async function I(){return{firstName:"",lastName:"",ID:"",departmentName:"",employeeNumber:await d.getCompanyEmployeeNumber(),position:""}}const N=()=>{const e=j(r=>{var c;return(c=r.company)==null?void 0:c.departments});if(!e)return a.jsx("span",{children:"Error: Departments are not found in the store"});const{t}=y(),l=[{field:"firstName",headerName:t("employees_page.employee_table_labels.first_name"),editable:!0,flex:1},{field:"lastName",headerName:t("employees_page.employee_table_labels.last_name"),editable:!0,flex:1},{field:"ID",headerName:t("employees_page.employee_table_labels.id"),editable:!0,flex:1},{field:"departmentName",headerName:t("employees_page.employee_table_labels.department"),editable:!0,flex:1,type:"singleSelect",valueOptions:r=>_(r)},{field:"employeeNumber",headerName:t("employees_page.employee_table_labels.employee_number"),editable:!1,flex:1},{field:"position",headerName:t("employees_page.employee_table_labels.position"),editable:!0,flex:1}],{isPending:m,isError:n,data:p,error:o}=f({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(m)return a.jsx("span",{children:"Loading..."});if(n)return a.jsxs("span",{children:["Error: ",o.message]});if(!p)return a.jsx("span",{children:"Empty data"});const i=p,s=e.map(r=>r.departmentName)||[];_=P(s);const h=i.map(r=>({firstName:r.profile.firstName,lastName:r.profile.lastName,ID:r.profile.ID,departmentName:r.department.departmentName,employeeNumber:r.employeeNumber,position:r.position})),g=T(),E=v();return a.jsxs("div",{children:[a.jsx("h2",{children:t("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:h,tableColumns:l},specialProps:{getDefaultValues:I,updateRow:g,deleteRow:E},editable:!0})]})};function P(e){return function(t){const l=[];return e==null||e.map(m=>l.push(m)),l}}const R={guest:b,user:b,supervisor:w,manager:N,admin:N},S=()=>{const e=D(l=>l.role),t=R[e];return a.jsxs(C,{sx:{p:4},children:[a.jsx("h1",{children:"Employee page"}),a.jsx(t,{})]})};export{S as default};
