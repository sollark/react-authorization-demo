import{b as f,j as a,c as D,d as C,B as _}from"./index-94c5a148.js";import{e as d,T as u,a as b}from"./Table-46928938.js";import{u as c}from"./useQuery-d8faf213.js";import"./SecondaryButton-d8be78ef.js";import"./TextField-5daeca9c.js";const w=()=>{const{t:e}=f(),t=[{field:"firstName",headerName:e("profile.first_name"),flex:1},{field:"lastName",headerName:e("profile.last_name"),flex:1},{field:"ID",headerName:e("profile.id"),flex:1},{field:"departmentName",headerName:e("department.department"),flex:1},{field:"employeeNumber",headerName:e("employee.employee_number"),flex:1},{field:"position",headerName:e("employee.position"),flex:1}],{isPending:r,isError:m,data:i,error:l}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(r)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",l.message]});if(!i)return a.jsx("span",{children:"Empty data"});const o=i,p=o==null?void 0:o.map(n=>({firstName:n.profile.firstName,lastName:n.profile.lastName,ID:n.profile.ID,departmentName:n.department.departmentName,employeeNumber:n.employeeNumber,position:n.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:p,tableColumns:t}})]})},y=()=>{const{t:e}=f(),t=[{field:"firstName",headerName:e("profile.first_name"),flex:1},{field:"lastName",headerName:e("profile.last_name"),flex:1},{field:"departmentName",headerName:e("department.department"),flex:1},{field:"position",headerName:e("employee.position"),flex:1}],{isPending:r,isError:m,data:i,error:l}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeBasicData});if(r)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",l.message]});if(!i)return a.jsx("span",{children:"Empty data"});const o=i,p=o==null?void 0:o.map(n=>({firstName:n.profile.firstName,lastName:n.profile.lastName,departmentName:n.department.departmentName,position:n.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:p,tableColumns:t}})]})};let x;function T(){return async e=>{const t=b(e),{firstName:r,lastName:m,ID:i,departmentName:l,employeeNumber:o,position:p}=t;return await d.updateCompanyEmployee(r,m,i,l,o,p),!0}}function v(){return async e=>{const t=b(e),{employeeNumber:r}=t;return await d.deleteCompanyEmployee(r),!0}}async function I(){return{firstName:"",lastName:"",ID:"",departmentName:"",employeeNumber:await d.getCompanyEmployeeNumber(),position:""}}const h=()=>{const e=D(s=>{var N;return(N=s.company)==null?void 0:N.departments});if(!e)return a.jsx("span",{children:"Error: Departments are not found in the store"});const{t}=f(),r=[{field:"firstName",headerName:t("profile.first_name"),editable:!0,flex:1},{field:"lastName",headerName:t("profile.last_name"),editable:!0,flex:1},{field:"ID",headerName:t("profile.id"),editable:!0,flex:1},{field:"departmentName",headerName:t("department.department"),editable:!0,flex:1,type:"singleSelect",valueOptions:s=>x(s)},{field:"employeeNumber",headerName:t("employee.employee_number"),editable:!1,flex:1},{field:"position",headerName:t("employee.position"),editable:!0,flex:1}],{isPending:m,isError:i,data:l,error:o}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(m)return a.jsx("span",{children:"Loading..."});if(i)return a.jsxs("span",{children:["Error: ",o.message]});if(!l)return a.jsx("span",{children:"Empty data"});const p=l,n=e.map(s=>s.departmentName)||[];x=P(n);const E=p.map(s=>({firstName:s.profile.firstName,lastName:s.profile.lastName,ID:s.profile.ID,departmentName:s.department.departmentName,employeeNumber:s.employeeNumber,position:s.position})),j=T(),g=v();return a.jsxs("div",{children:[a.jsx("h2",{children:t("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:E,tableColumns:r},specialProps:{getDefaultValues:I,updateRow:j,deleteRow:g},editable:!0})]})};function P(e){return function(t){const r=[];return e==null||e.map(m=>r.push(m)),r}}const R={guest:y,user:y,supervisor:w,manager:h,admin:h},S=()=>{const e=C(r=>r.role),t=R[e];return a.jsxs(_,{sx:{p:4},children:[a.jsx("h1",{children:"Employee page"}),a.jsx(t,{})]})};export{S as default};
