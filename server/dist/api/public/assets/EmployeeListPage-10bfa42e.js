import{b as f,j as a,c as D,d as C,B as _}from"./index-4c6a8037.js";import{e as d,T as u,a as b}from"./Table-3aa9a53d.js";import{u as c}from"./useQuery-b69fe9d7.js";import"./SecondaryButton-7a73babb.js";import"./TextField-a99ce118.js";const w=()=>{const{t:e}=f(),t=[{field:"firstName",headerName:e("profile.first_name"),flex:1},{field:"lastName",headerName:e("profile.last_name"),flex:1},{field:"ID",headerName:e("profile.id"),flex:1},{field:"departmentName",headerName:e("department.department"),flex:1},{field:"employeeNumber",headerName:e("employee.employee_number"),flex:1},{field:"position",headerName:e("employee.position"),flex:1}],{isPending:r,isError:m,data:l,error:i}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(r)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",i.message]});if(!l)return a.jsx("span",{children:"Empty data"});const o=l,p=o==null?void 0:o.map(s=>({firstName:s.profile.firstName,lastName:s.profile.lastName,ID:s.profile.ID,departmentName:s.department.departmentName,employeeNumber:s.employeeNumber,position:s.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:p,tableColumns:t}})]})},y=()=>{const{t:e}=f(),t=[{field:"firstName",headerName:e("profile.first_name"),flex:1},{field:"lastName",headerName:e("profile.last_name"),flex:1},{field:"departmentName",headerName:e("department.department"),flex:1},{field:"position",headerName:e("employee.position"),flex:1}],{isPending:r,isError:m,data:l,error:i}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeBasicData});if(r)return a.jsx("span",{children:"Loading..."});if(m)return a.jsxs("span",{children:["Error: ",i.message]});if(!l)return a.jsx("span",{children:"Empty data"});const o=l,p=o==null?void 0:o.map(s=>({firstName:s.profile.firstName,lastName:s.profile.lastName,departmentName:s.department.departmentName,position:s.position}));return a.jsxs("div",{children:[a.jsx("h2",{children:e("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:p,tableColumns:t}})]})};let x;function T(){return async e=>{const t=b(e),{firstName:r,lastName:m,ID:l,departmentName:i,employeeNumber:o,position:p}=t;return!!await d.updateCompanyEmployee(r,m,l,i,o,p)}}function v(){return async e=>{const t=b(e),{employeeNumber:r}=t;return!!await d.deleteCompanyEmployee(r)}}async function I(){return{firstName:"",lastName:"",ID:"",departmentName:"",employeeNumber:await d.getCompanyEmployeeNumber(),position:""}}const h=()=>{const e=D(n=>{var N;return(N=n.company)==null?void 0:N.departments});if(!e)return a.jsx("span",{children:"Error: Departments are not found in the store"});const{t}=f(),r=[{field:"firstName",headerName:t("profile.first_name"),editable:!0,flex:1},{field:"lastName",headerName:t("profile.last_name"),editable:!0,flex:1},{field:"ID",headerName:t("profile.id"),editable:!0,flex:1},{field:"departmentName",headerName:t("department.department"),editable:!0,flex:1,type:"singleSelect",valueOptions:n=>x(n)},{field:"employeeNumber",headerName:t("employee.employee_number"),editable:!1,flex:1},{field:"position",headerName:t("employee.position"),editable:!0,flex:1}],{isPending:m,isError:l,data:i,error:o}=c({queryKey:["employees"],queryFn:d.getCompanyEmployeeAdvancedData});if(m)return a.jsx("span",{children:"Loading..."});if(l)return a.jsxs("span",{children:["Error: ",o.message]});if(!i)return a.jsx("span",{children:"Empty data"});const p=i,s=e.map(n=>n.departmentName)||[];x=P(s);const E=p.map(n=>({firstName:n.profile.firstName,lastName:n.profile.lastName,ID:n.profile.ID,departmentName:n.department.departmentName,employeeNumber:n.employeeNumber,position:n.position})),j=T(),g=v();return a.jsxs("div",{children:[a.jsx("h2",{children:t("employees_page.employee_table")}),a.jsx(u,{basicProps:{dataRows:E,tableColumns:r},specialProps:{getDefaultValues:I,updateRow:j,deleteRow:g},editable:!0})]})};function P(e){return function(t){const r=[];return e==null||e.map(m=>r.push(m)),r}}const R={guest:y,employee:y,supervisor:w,manager:h,admin:h},S=()=>{const e=C(r=>r.role),t=R[e];return a.jsxs(_,{sx:{p:4},children:[a.jsx("h1",{children:"Employee page"}),a.jsx(t,{})]})};export{S as default};
