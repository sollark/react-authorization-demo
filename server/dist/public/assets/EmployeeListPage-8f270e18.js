import{j as e,b as E,c as j,B as D}from"./index-fc2bed8b.js";import{e as l,T as d,a as y}from"./Table-9a901223.js";import{u}from"./useQuery-1ca8cd82.js";import"./SecondaryButton-646d269d.js";import"./TextField-67bdb7ae.js";const g=[{field:"firstName",headerName:"First name",flex:1},{field:"lastName",headerName:"Last name",flex:1},{field:"ID",headerName:"ID",flex:1},{field:"departmentName",headerName:"Department",flex:1},{field:"employeeNumber",headerName:"Employee number",flex:1},{field:"position",headerName:"Position",flex:1}],C=()=>{const{isPending:a,isError:n,data:t,error:o}=u({queryKey:["employees"],queryFn:l.getCompanyEmployeeAdvancedData});if(a)return e.jsx("span",{children:"Loading..."});if(n)return e.jsxs("span",{children:["Error: ",o.message]});if(!t)return e.jsx("span",{children:"Empty data"});const s=t,i=s==null?void 0:s.map(r=>({firstName:r.profile.firstName,lastName:r.profile.lastName,ID:r.profile.ID,departmentName:r.department.departmentName,employeeNumber:r.employeeNumber,position:r.position}));return e.jsxs("div",{children:[e.jsx("h2",{children:"Employee Table"}),e.jsx(d,{basicProps:{dataRows:i,tableColumns:g}})]})},w=[{field:"firstName",headerName:"First name",flex:1},{field:"lastName",headerName:"Last name",flex:1},{field:"departmentName",headerName:"Department",flex:1},{field:"position",headerName:"Position",flex:1}],c=()=>{const{isPending:a,isError:n,data:t,error:o}=u({queryKey:["employees"],queryFn:l.getCompanyEmployeeBasicData});if(a)return e.jsx("span",{children:"Loading..."});if(n)return e.jsxs("span",{children:["Error: ",o.message]});if(!t)return e.jsx("span",{children:"Empty data"});const s=t,i=s==null?void 0:s.map(r=>({firstName:r.profile.firstName,lastName:r.profile.lastName,departmentName:r.department.departmentName,position:r.position}));return e.jsxs("div",{children:[e.jsx("h2",{children:"Employee Table"}),e.jsx(d,{basicProps:{dataRows:i,tableColumns:w}})]})};let x;const T=[{field:"firstName",headerName:"First name",editable:!0,flex:1},{field:"lastName",headerName:"Last name",editable:!0,flex:1},{field:"ID",headerName:"ID",editable:!0,flex:1},{field:"departmentName",headerName:"Department",editable:!0,flex:1,type:"singleSelect",valueOptions:a=>x(a)},{field:"employeeNumber",headerName:"Employee number",editable:!1,flex:1},{field:"position",headerName:"Position",editable:!0,flex:1}];function P(){return async a=>{const n=y(a),{firstName:t,lastName:o,ID:s,departmentName:i,employeeNumber:r,position:p}=n;return await l.updateCompanyEmployee(t,o,s,i,r,p),!0}}function I(){return async a=>{const n=y(a),{employeeNumber:t}=n;return await l.deleteCompanyEmployee(t),!0}}async function v(){return{firstName:"",lastName:"",ID:"",departmentName:"",employeeNumber:await l.getCompanyEmployeeNumber(),position:""}}const N=()=>{const a=E(m=>{var f;return(f=m.company)==null?void 0:f.departments});if(!a)return e.jsx("span",{children:"Error: Departments are not found in the store"});const{isPending:n,isError:t,data:o,error:s}=u({queryKey:["employees"],queryFn:l.getCompanyEmployeeAdvancedData});if(n)return e.jsx("span",{children:"Loading..."});if(t)return e.jsxs("span",{children:["Error: ",s.message]});if(!o)return e.jsx("span",{children:"Empty data"});const i=o,r=a.map(m=>m.departmentName)||[];x=L(r);const p=i.map(m=>({firstName:m.profile.firstName,lastName:m.profile.lastName,ID:m.profile.ID,departmentName:m.department.departmentName,employeeNumber:m.employeeNumber,position:m.position})),h=P(),b=I();return e.jsxs("div",{children:[e.jsx("h2",{children:"Employee Table"}),e.jsx(d,{basicProps:{dataRows:p,tableColumns:T},specialProps:{getDefaultValues:v,updateRow:h,deleteRow:b},editable:!0})]})};function L(a){return function(n){const t=[];return a==null||a.map(o=>t.push(o)),t}}const R={guest:c,user:c,supervisor:C,manager:N,admin:N},S=()=>{const a=j(t=>t.role),n=R[a];return e.jsxs(D,{sx:{p:4},children:[e.jsx("h1",{children:"Employee page"}),e.jsx(n,{})]})};export{S as default};
